# Dantist45

Проект стоматологической клиники с административной панелью.

## Технологии

- Next.js 16
- React 19
- TypeScript
- TailwindCSS v4
- SQLite (better-sqlite3)
- bcryptjs (для хеширования паролей)

## Установка и запуск

1. Установите зависимости:

```bash
npm install
```

2. Инициализируйте базу данных и создайте администратора:

```bash
npm run init-db
```

**Данные администратора по умолчанию:**

- Никнейм: `admin`
- Пароль: `admin123`

**Тестовый пользователь с ролью менеджер:**

- Никнейм: `manager`
- Пароль: `manager123`

3. Запустите dev сервер:

```bash
npm run dev
```

4. Откройте [http://localhost:3000](http://localhost:3000)

## Структура проекта

- `app/public/` - публичная часть сайта
- `app/admin/` - административная панель (защищенная авторизацией)
- `app/api/` - API endpoints для авторизации и управления пользователями
- `lib/db.ts` - настройка базы данных SQLite
- `lib/password.ts` - утилиты для работы с паролями

## Доступные команды

```bash
npm run dev       # Запуск dev сервера
npm run build     # Сборка для продакшена
npm run start     # Запуск продакшен сборки
npm run lint      # Проверка ESLint
npm run lint:fix  # Исправление ESLint
npm run format    # Форматирование Prettier
npm run init-db   # Инициализация базы данных
```

## Административная панель

### Роли пользователей

Система поддерживает две роли:

1. **Администратор (admin)** - имеет полные права и доступ ко всем частям админки, включая управление пользователями
2. **Менеджер (manager)** - имеет доступ к админ-панели, но не может управлять пользователями

### Функционал

После входа в зависимости от роли вы можете:

**Администратор:**

- Просматривать список пользователей
- Создавать новых пользователей
- Редактировать существующих пользователей
- Удалять пользователей
- Генерировать пароли для новых пользователей
- Назначать роли пользователей

**Менеджер:**

- Просматривать главную страницу админ-панели
- Доступ к другим разделам админки (кроме пользователей)

## API endpoints

### Auth

- `POST /api/auth/login` - Вход в систему
- `POST /api/auth/logout` - Выход из системы
- `GET /api/auth/me` - Получить информацию о текущем пользователе

### Users

- `GET /api/users` - Получить список пользователей (только admin)
- `POST /api/users` - Создать пользователя (только admin)
- `GET /api/users/[id]` - Получить пользователя по ID (только admin)
- `PUT /api/users/[id]` - Обновить пользователя (только admin)
- `DELETE /api/users/[id]` - Удалить пользователя (только admin)
